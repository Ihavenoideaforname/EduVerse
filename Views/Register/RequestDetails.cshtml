@model RequestDetailsViewModel

@{
    ViewData["Title"] = "Request Details";
}

<h1>@ViewData["Title"]</h1>

<div class="card shadow-sm mt-4">
    <div class="card-body">

        <h4 class="mb-3">School Information</h4>

        <div class="mb-2">
            <strong>@Model.SchoolName (@Model.SchoolNameShortcut)</strong>
        </div>

        <div class="row mb-4">
            <div class="col-md-4">
                <label class="fw-bold">Email</label>
                <div>@Model.SchoolEmail</div>
            </div>

            <div class="col-md-4">
                <label class="fw-bold">Phone</label>
                <div>@Model.SchoolPhoneNumber</div>
            </div>
        </div>

        <h4 class="mb-3">Address</h4>

        <div class="mb-3">
            @Model.Street @Model.BuildingNumber <br />
            @Model.PostalCode, @Model.City <br />
            @Model.State, @Model.Country
        </div>

        <h4 class="mb-3">Principal</h4>
        <div class="mb-3">@Model.PrincipalName @Model.PrincipalSurname</div>

        <h4 class="mb-3">Request Letter</h4>
        <textarea class="form-control mb-4" rows="10" readonly>@Model.RequestLetter</textarea>

        <h4 class="mb-3">Status</h4>
        <div class="mb-4">
            <span class="badge @Model.StatusClass px-3 py-2">@Model.Status</span>
            <div class="text-muted mt-2">
                Submitted: @Model.RequestedAt.ToString("dd-MM-yyyy HH:mm")
            </div>

            @if(Model.ReviewedBy != null)
            {
                <div class="text-muted mt-1">
                    Reviewed by @Model.ReviewedBy on @Model.ReviewedAt?.ToString("dd-MM-yyyy HH:mm")
                </div>
            }
        </div>

        <div class="d-flex justify-content-end gap-2 mt-4">
            <a asp-action="RequestList" class="btn btn-secondary">Back</a>

            <form asp-action="Reject" method="post">
                <input type="hidden" name="id" value="@Model.Id" />
                <button type="submit" class="btn btn-danger" @(Model.Status.ToLower() != "pending" ? "disabled" : "")>Reject</button>
            </form>

            <form asp-action="Approve" method="post">
                <input type="hidden" name="id" value="@Model.Id" />
                <button type="submit" class="btn btn-success" @(Model.Status.ToLower() != "pending" ? "disabled" : "")>Approve</button>
            </form>
        </div>

    </div>
</div>
